<!DOCTYPE html>
<html>
<head>
    <title>Log Watcher</title>
    <style>
        body { font-family: monospace; background: #000; color: #0f0; margin: 20px; }
        #logs { height: 90vh; overflow-y: auto; white-space: pre-wrap; }
        .status { color: #666; font-size: 12px; }
    </style>
</head>
<body>
    <h1>Real Time Log Watcher <span class="status" id="status">Connecting...</span></h1>
    <div id="logs"></div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const logs = document.getElementById('logs');
        const status = document.getElementById('status');
        const socket = io();
        let buffer = [];

        function render() {
            logs.textContent = buffer.join('\n');
            logs.scrollTop = logs.scrollHeight;
        }
        
        socket.on('connect', () => {
            status.textContent = 'Connected';
            status.style.color = '#0f0';
        });
        
        socket.on('disconnect', () => {
            status.textContent = 'Disconnected';
            status.style.color = '#f00';
        });
        
        socket.on('lastLines', (lines) => {
            buffer = lines.slice(-10);
            render();
            // status.textContent = `Loaded ${buffer.length} lines`;
        });
        
        socket.on('newLog', (line) => {
            buffer.push(line);
            // if (buffer.length > 10) buffer.shift();
            render();
        });
    </script>
</body>
</html>
